@inherits LayoutComponentBase

<MudThemeProvider Theme="@ThemeService.Current"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="25">
        <MudLink Href="@Links.Subject.History.Index" Typo="Typo.h5" Color="Color.Default" Underline="Underline.None">
            Education <sup class="beta" style="font-size: 0.9rem;color: var(--mud-palette-primary);">beta</sup>
        </MudLink>
        <MudSpacer/>
        <MudIconButton Icon="@ThemeService.Icon" Color="Color.Inherit" OnClick="@ThemeService.ToggleAsync"/>
        <AuthorizeView>
            <NotAuthorized>
                <MudButton Color="Color.Primary" Variant="Variant.Filled" Size="Size.Small" OnClick="@OnLogin" Class="ml-3">
                    @L["SignIn"]
                </MudButton>
            </NotAuthorized>
        </AuthorizeView>
    </MudAppBar>

    <MudMainContent>
        @Body
    </MudMainContent>
    @* <footer> *@
    @*     <div class="footer-body"> *@
    @*         <LanguageSelector/> *@
    @*         <MudText Typo="Typo.body2"> *@
    @*             © @DateTime.Now.Year - Elwark *@
    @*         </MudText> *@
    @*     </div> *@
    @* </footer> *@
    @* <MudScrollToTop TopOffset="300"> *@
    @*     <MudFab Color="Color.Primary" Icon="@Icons.Filled.KeyboardArrowUp"/> *@
    @* </MudScrollToTop> *@
</MudLayout>

@code {

    [Inject]
    private ThemeService ThemeService { get; set; } = default!;

    [Inject]
    private NavigationManager Navigation { get; set; } = default!;

    [Inject]
    private IStringLocalizer<App> L { get; set; } = default!;
    

    private void OnLogin() =>
        Navigation.NavigateTo(Links.Authentication.LogIn(Uri.EscapeDataString(Navigation.Uri)));

}
