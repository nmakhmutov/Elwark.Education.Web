<div class="@Class">
    <MudChart ChartType="ChartType.Bar" Width="100%" Height="@Size" ChartSeries="@Series" ChartOptions="@Options"/>
    <ChartList Items="@Items"/>
</div>

@code {

    [Inject]
    private IStringLocalizer<App> L { get; set; } = default!;

    [Parameter]
    public string? Class { get; set; }

    [Parameter]
    public string Size { get; set; } = "250px";

    [Parameter]
    public AnswerRatio Value { get; set; } = default!;

    private static readonly ChartOptions Options = new()
    {
        DisableLegend = true,
        InterpolationOption = InterpolationOption.NaturalSpline,
        XAxisLines = false,
        YAxisLines = false,
        YAxisTicks = 20,
        ChartPalette = new[]
        {
            Colors.Blue.Darken2,
            Colors.Green.Darken2,
            Colors.Orange.Darken2,
            Colors.Purple.Darken2
        }
    };

    private List<ChartSeries> Series => new()
    {
        new ChartSeries { Data = new[] { Value.Answered / (double)Value.Questions * 100 } },
        new ChartSeries { Data = new[] { Value.NotAnswered / (double)Value.Questions * 100 } },
        new ChartSeries { Data = new[] { Value.Correct / (double)Value.Questions * 100 } },
        new ChartSeries { Data = new[] { Value.Incorrect / (double)Value.Questions * 100 } }
    };

    private ChartList.Item[] Items => new[]
    {
        new ChartList.Item(L["Questions:Answered"], Value.Answered, Colors.Blue.Darken2),
        new ChartList.Item(L["Questions:NotAnswered"], Value.NotAnswered, Colors.Green.Darken2),
        new ChartList.Item(L["Questions:Correct"], Value.Correct, Colors.Orange.Darken2),
        new ChartList.Item(L["Questions:Incorrect"], Value.Incorrect, Colors.Purple.Darken2),
        new ChartList.Item(L["Questions:Total"], Value.Questions, null)
    };

}
