@using Education.Web.Pages
@inherits LayoutComponentBase

<MudThemeProvider Theme="@ThemeService.Theme"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="0">
        <MudLink Href="@CommonLinks.Root" Typo="Typo.h5" Color="Color.Default" Underline="Underline.None">
            Education <sup class="mud-typography mud-typography-caption mud-primary-text">beta</sup>
        </MudLink>
        <MudSpacer/>
        <MudIconButton Icon="@ThemeService.Icon" Color="Color.Inherit" OnClick="@ThemeService.ToggleAsync"/>
        <AuthorizeView>
            <NotAuthorized>
                <MudButton Color="Color.Primary" Variant="Variant.Filled" Size="Size.Small" OnClick="@OnLogin" Class="ml-3">
                    @L["SignIn"]
                </MudButton>
            </NotAuthorized>
        </AuthorizeView>
    </MudAppBar>

    @Body
    
</MudLayout>

@code {

    [Inject]
    private ThemeService ThemeService { get; set; } = default!;

    [Inject]
    private NavigationManager Navigation { get; set; } = default!;

    [Inject]
    private IStringLocalizer<App> L { get; set; } = default!;

    private void OnLogin() =>
        Navigation.NavigateTo(CommonLinks.LogIn(Navigation.Uri));

}
