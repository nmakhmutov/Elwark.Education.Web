@using Education.Web.Client.Features.History.Services
<section class="mud-paper pa-3 pa-sm-6 @Class">
    @if (HasTest && UserActivity.PassedTests > 0)
    {
        <MudLink Class="mt-3" Typo="Typo.subtitle2" Href="@HistoryUrl.User.MyArticle(ArticleId)">
            @L["Test:MyProgress"]
        </MudLink>
    }
    else
    {
        <MudText Class="mt-3" Typo="Typo.subtitle2">
            @L["Test:MyProgress"]
        </MudText>
    }

    <ArticleProgressView
        Class="mt-3"
        PassedTests="@UserActivity.PassedTests"
        TimeSpent="@UserActivity.TimeSpent"/>

    @if (HasTest)
    {
        <MudButton
            Class="mt-3"
            Link="@HistoryUrl.ArticleTest.Index(ArticleId)"
            Variant="Variant.Filled"
            Color="Color.Primary"
            FullWidth
            DisableElevation>
            @L["Shared_TakeTheTest"]
        </MudButton>
    }
</section>

@code {

    [Inject]
    public IStringLocalizer<App> L { get; set; } = default!;

    [Parameter]
    public string? Class { get; set; }

    [Parameter, EditorRequired]
    public string ArticleId { get; set; } = default!;

    [Parameter, EditorRequired]
    public UserActivityOverviewModel UserActivity { get; set; } = default!;

    [Parameter, EditorRequired]
    public bool HasTest { get; set; }

}