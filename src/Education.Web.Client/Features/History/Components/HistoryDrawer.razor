@using Education.Web.Client.Features.History.Services
<MudDrawer Open="@DrawerOpen" OpenChanged="OnDrawerOpenChanged" ClipMode="DrawerClipMode.Docked" Breakpoint="Breakpoint.Lg" Elevation="0">
    <MudNavMenu Color="Color.Primary" Dense Margin="Margin.Dense" Rounded="true" Class="pa-2">
        <MudNavLink Match="NavLinkMatch.All" Href="@HistoryUrl.Root" Icon="@Icons.Material.Outlined.Home">
            @L["Page:Home"]
        </MudNavLink>

        <MudNavGroup Title="@L["History:Epochs"]" Icon="@EduIcons.Epochs">
            @foreach (var epoch in EpochTypeExtensions.List[1..])
            {
                <MudNavLink Href="@HistoryUrl.Content.Epoch(epoch)">
                    @L[$"Epoch:{epoch.ToFastString()}"]
                </MudNavLink>
            }
        </MudNavGroup>

        <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.Content.Empires" Icon="@EduIcons.Empires">
            @L["History:Empires"]
        </MudNavLink>

        <MudDivider Class="my-2"/>

        <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.ArticleTest.Index()" Icon="@EduIcons.Tests">
            @L["Tests"]
        </MudNavLink>
        <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.EventGuesser.Index" Icon="@EduIcons.EventGuesser">
            @L["EventGuesser"]
        </MudNavLink>
        <MudNavGroup Title="@L["Leaderboards"]" Icon="@EduIcons.Leaderboard">
            <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.Leaderboard.Global">
                @L["Leaderboard:GlobalTitle"]
            </MudNavLink>
            <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.Leaderboard.Monthly">
                @L["Leaderboard:MonthlyTitle"]
            </MudNavLink>
        </MudNavGroup>
        <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.Store.Index" Icon="@EduIcons.InventoryStore">
            @L["Inventory:Store"]
        </MudNavLink>

        <AuthorizeView>
            <Authorized>
                <MudDivider Class="my-2"/>

                <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.User.MyProfile" Icon="@EduIcons.MyProfile">
                    @L["Profile"]
                </MudNavLink>
                <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.User.MyInventories" Icon="@EduIcons.MyInventories">
                    @L["Inventories"]
                </MudNavLink>
                <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.User.MyBookmarks" Icon="@EduIcons.MyBookmarks">
                    @L["Bookmarks"]
                </MudNavLink>
                <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.User.MyQuests" Icon="@EduIcons.MyQuests">
                    @L["Quests"]
                </MudNavLink>
                <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.User.MyStatistics" Icon="@EduIcons.MyStatistics">
                    @L["Statistics"]
                </MudNavLink>
                <MudNavLink Match="NavLinkMatch.Prefix" Href="@HistoryUrl.User.MyAchievements" Icon="@EduIcons.Achievements">
                    @L["Achievements"]
                </MudNavLink>
            </Authorized>
        </AuthorizeView>
    </MudNavMenu>
</MudDrawer>

@code {

    [Inject]
    private IStringLocalizer<App> L { get; set; } = default!;

    [Parameter]
    public bool DrawerOpen { get; set; }

    [Parameter]
    public EventCallback<bool> OnDrawerOpenChanged { get; set; }

}