@page "/history/my/profile"
@layout HistoryLayout
@attribute [Authorize]

<PageTitle>
    @L["User_Profile_Title"]
</PageTitle>

<ApiViewer Result="@_result" Context="profile">
    <EduContainer Class="py-3 py-sm-6" MaxWidth="EduWidth.W1920">
        <section class="grid">
            <header class="header">
                <MudText Typo="Typo.h2">
                    @L["User_Profile_Title"]
                </MudText>
            </header>

            <aside class="sidebar">
                <EduFitGrid Class="align-start">
                    <ProfileCard Customer="@Customer">
                        <UserLevelProgress
                            Class="pa-3 pa-sm-6"
                            Level="@profile.Level.Level"
                            Experience="@profile.Level.Experience"
                            Threshold="@profile.Level.Threshold"/>
                    </ProfileCard>

                    <AchievementsCard
                        Customer="@Customer"
                        Total="@profile.Achievements.Total"
                        Completed="@profile.Achievements.Unlocked"
                        Completeness="@profile.Achievements.Completeness"
                        LatestCompletedAchievement="@profile.Achievements.LatestCompletedAchievement"/>
                </EduFitGrid>
            </aside>

            <section class="content">
                <EduFillGrid Class="mb-3 mb-sm-6">
                    <CardBadge
                        Title="@L["Quizzes_Title"]"
                        Value="@profile.TotalQuizzes"
                        Icon="@EduIcons.Quiz">
                        <MudButton
                            Class="text-transform-none"
                            EndIcon="@Icons.Material.Outlined.ArrowForward"
                            Href="@HistoryUrl.User.MyQuizzes">
                            @L["Quizzes_SeeAll"]
                        </MudButton>
                    </CardBadge>

                    <CardBadge
                        Title="@L["History_DateGuessers_Title"]"
                        Value="@profile.TotalDateGuessers"
                        Icon="@EduIcons.DateGuesser">
                        <MudButton
                            Class="text-transform-none"
                            EndIcon="@Icons.Material.Outlined.ArrowForward"
                            Href="@HistoryUrl.User.MyDateGuessers">
                            @L["History_DateGuessers_SeeAll"]
                        </MudButton>
                    </CardBadge>
                </EduFillGrid>

                <MudText Class="mb-3 mb-sm-6" Typo="Typo.h4">
                    Recent articles
                </MudText>
                <EduFillGrid>
                    @foreach (var item in profile.RecentArticles)
                    {
                        <ArticleCard Article="@item.Article" Activity="@item.Activity"/>
                    }
                </EduFillGrid>
            </section>
        </section>
    </EduContainer>
</ApiViewer>
