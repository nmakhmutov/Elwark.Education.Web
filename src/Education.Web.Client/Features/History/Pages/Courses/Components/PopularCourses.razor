<EduFillGrid>
    <ApiViewer Result="@_result">
        <Loading>
            @for (var i = 0; i < 6; i++)
            {
                <SkeletonCard Horizontal HideFooter/>
            }
        </Loading>
        <ChildContent Context="articles">
            @foreach (var item in articles.Items)
            {
                <CourseCard
                    Course="@item.Course"
                    Activity="@item.Activity"
                    OnBookmarkClick="@LearnerService.ToggleArticleBookmarkAsync"
                    Horizontal
                    HideFooter
                    HideOverview/>
            }
        </ChildContent>
    </ApiViewer>
</EduFillGrid>

@code {

    private ApiResult<PagingOffsetModel<UserCourseOverviewModel>> _result =
        ApiResult<PagingOffsetModel<UserCourseOverviewModel>>.Loading();

    [Inject]
    private IHistoryCourseService HistoryCourseService { get; set; } = default!;

    [Inject]
    private IHistoryLearnerService LearnerService { get; set; } = default!;

    protected override async Task OnInitializedAsync() =>
        _result = await HistoryCourseService
            .GetAsync(new GetCourseRequest(GetCourseRequest.SortType.Popularity, 0, 6));

}