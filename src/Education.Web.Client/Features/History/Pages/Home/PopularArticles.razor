@using Education.Web.Client.Features.History.Services.Article.Request

<ApiViewer Result="@_result">
    <Loading>
        @for (var i = 0; i < 6; i++)
        {
            <ArticleSkeletonCard/>
        }
    </Loading>
    <ChildContent Context="articles">
        <EduFillGrid>
            @foreach (var item in articles.Items)
            {
                <ArticleCard
                    Article="@item.Article"
                    Activity="@item.Activity"
                    OnBookmarkClick="@LearnerService.ToggleArticleBookmarkAsync"
                    Horizontal
                    HideFooter
                    HideOverview/>
            }
        </EduFillGrid>
    </ChildContent>
</ApiViewer>

@code {

    private ApiResult<PagingOffsetModel<UserArticleOverviewModel>> _result =
        ApiResult<PagingOffsetModel<UserArticleOverviewModel>>.Loading();

    [Inject]
    private IHistoryArticleService HistoryArticleService { get; set; } = default!;

    [Inject]
    private IHistoryLearnerService LearnerService { get; set; } = default!;

    protected override async Task OnInitializedAsync() =>
        _result = await HistoryArticleService
            .GetAsync(new GetArticlesRequest(EpochType.None, GetArticlesRequest.SortType.Popularity, 0, 6));

}