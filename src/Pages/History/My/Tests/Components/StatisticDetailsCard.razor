@using MudBlazor.Utilities
@typeparam TValue

<MudCard Class="@_class" Elevation="0">
    <MudCardHeader Class="pa-3 pa-sm-6">
        <CardHeaderContent>
            <div class="d-flex align-center justify-space-between">
                <MudText Typo="Typo.h5">
                    @Title
                </MudText>
                <HumanReadableText Value="@Value" Typo="Typo.h5"/>
            </div>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent Class="flex-grow-1 pa-3 pa-sm-6">
        <div class="grid">
            @if (TotalContent is not null)
            {
                <div class="total">
                    @TotalContent
                </div>
            }
            @if (ProgressContent is not null)
            {
                <div class="progress">
                    @ProgressContent
                </div>
            }
            @if (ActivityContent is not null)
            {
                <div class="activity">
                    @ActivityContent
                </div>
            }
        </div>
    </MudCardContent>
</MudCard>

@code {
    private string? _class;

    [Parameter]
    public string? Class { get; set; }

    [Parameter, EditorRequired]
    public string Title { get; set; } = string.Empty;

    [Parameter, EditorRequired]
    public TValue Value { get; set; } = default!;

    [Parameter]
    public RenderFragment? TotalContent { get; set; }

    [Parameter]
    public RenderFragment? ProgressContent { get; set; }

    [Parameter]
    public RenderFragment? ActivityContent { get; set; }

    protected override void OnParametersSet() => 
        _class = CssBuilder.Default("d-flex flex-column")
        .AddClass(Class, Class is not null)
        .Build();
}
