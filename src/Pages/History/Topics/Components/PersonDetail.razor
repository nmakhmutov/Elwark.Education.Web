@using Education.Web.Gateways.History
@using Education.Web.Gateways.Models.Content
@using Education.Web.Pages.History.Components

<EduContainer MaxWidth="EduWidth.W1920" Class="pa-0">
    <div class="grid">
        <div class="image">
            <MudImage Src="@Image" Fluid="true" Alt="@Title" ObjectFit="ObjectFit.Cover" ObjectPosition="ObjectPosition.Center"/>
        </div>

        <div class="content">
            <h1 class="title pa-3 px-sm-6">
                @Title
            </h1>
            <Breadcrumbs Items="@Breadcrumbs" Class="pa-3 px-sm-6"/>
            <div class="d-flex flex-wrap">
                @if (Born is not null)
                {
                    <div class="pa-3 px-sm-6">
                        <MudText Typo="Typo.caption" Color="Color.Surface">
                            @L["History:Born"]
                        </MudText>
                        <HistoryDate Date="@Born" Typo="Typo.h5"/>
                        <MudText Typo="Typo.body1">
                            @Born.Place
                        </MudText>
                    </div>
                }
                @if (Died is not null)
                {
                    <div class="pa-3 px-sm-6">
                        <MudText Typo="Typo.caption" Color="Color.Surface">
                            @L["History:Died"]
                        </MudText>
                        <HistoryDate Date="@Died" Typo="Typo.h5"/>
                        <MudText Typo="Typo.body1">
                            @Died.Place
                        </MudText>
                    </div>
                }
            </div>

            <MudText Typo="Typo.subtitle1" Class="mw-sm pa-3 px-sm-6">
                @Description
            </MudText>
        </div>

        <div class="characteristics d-flex flex-wrap">
            @foreach (var (title, text) in Characteristics)
            {
                <div class="pa-3 px-sm-6">
                    <MudText Class="title" Typo="Typo.subtitle1">
                        @title
                    </MudText>
                    <SimpleMarkdown Text="@text"/>
                </div>
            }
        </div>
    </div>
</EduContainer>

@code {

    [Inject]
    private IStringLocalizer<App> L { get; set; } = default!;

    [Parameter, EditorRequired]
    public string Title { get; set; } = string.Empty;

    [Parameter, EditorRequired]
    public string Description { get; set; } = string.Empty;

    [Parameter, EditorRequired]
    public string Image { get; set; } = string.Empty;

    [Parameter, EditorRequired]
    public PersonBirthdayModel? Born { get; set; }

    [Parameter, EditorRequired]
    public PersonBirthdayModel? Died { get; set; }

    [Parameter, EditorRequired]
    public CharacteristicModel[] Characteristics { get; set; } = Array.Empty<CharacteristicModel>();

    [Parameter, EditorRequired]
    public List<BreadcrumbItem> Breadcrumbs { get; init; } = new();

}
